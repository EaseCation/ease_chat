space_char = _{ " " | "\t" }
nonspace_char = _{ !space_char ~ ANY }
space = _{ ( space_char ) * }
nonspace_string = _{ ( nonspace_char ) + }
remaining_string = _{ ( ANY ) + }
end_of_command = _{ ("\r" | "\n") * ~ EOI }
// space rule is buggy, check "pushabc" and "push abc"

cmd_quit_head = { "quit" | "exit" | "q" }
cmd_quit = _{ cmd_quit_head }
cmd_list_head = { "list" | "l" }
cmd_list = _{ cmd_list_head } 
cmd_push_head = { "push" | "msg" | "say" | "p" }
sender_id = { nonspace_string }
chan_id = { nonspace_string }
msg = { remaining_string }
cmd_push = _{ cmd_push_head ~ space ~ sender_id ~ space ~ chan_id ~ space ~ msg }

command = _{ SOI ~ space ~ (cmd_quit | cmd_list | cmd_push) ~ space ~ end_of_command }
